(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[998],{5685:(e,t,s)=>{"use strict";s.d(t,{B:()=>n});var r=s(41150),a=s(53630);let n=e=>(0,r.U)({queryKey:["projects",e],queryFn:async()=>{let t=await a.s.api.projects[":projectId"].$get({param:{projectId:e}});return await t.json()},refetchOnReconnect:!0})},11874:(e,t,s)=>{Promise.resolve().then(s.bind(s,15136))},15136:(e,t,s)=>{"use strict";s.d(t,{SessionPageContent:()=>ei});var r=s(89835),a=s(50417),n=s(26057),d=s(75123),l=s.n(d),o=s(80942),i=s(72667),c=s(55931),m=s(41150),u=s(53630),x=s(41633),h=s(87829),g=s(93856),p=s(18237);function f(e){let{...t}=e;return(0,r.jsx)(h.bL,{"data-slot":"dialog",...t})}function b(e){let{...t}=e;return(0,r.jsx)(h.l9,{"data-slot":"dialog-trigger",...t})}function j(e){let{...t}=e;return(0,r.jsx)(h.ZL,{"data-slot":"dialog-portal",...t})}function v(e){let{className:t,...s}=e;return(0,r.jsx)(h.hJ,{"data-slot":"dialog-overlay",className:(0,p.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function N(e){let{className:t,children:s,showCloseButton:a=!0,...n}=e;return(0,r.jsxs)(j,{"data-slot":"dialog-portal",children:[(0,r.jsx)(v,{}),(0,r.jsxs)(h.UC,{"data-slot":"dialog-content",className:(0,p.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[s,a&&(0,r.jsxs)(h.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,r.jsx)(g.A,{}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function y(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"dialog-header",className:(0,p.cn)("flex flex-col gap-2 text-center sm:text-left",t),...s})}function w(e){let{className:t,...s}=e;return(0,r.jsx)(h.hE,{"data-slot":"dialog-title",className:(0,p.cn)("text-lg leading-none font-semibold",t),...s})}function k(e){let{className:t,...s}=e;return(0,r.jsx)(h.VY,{"data-slot":"dialog-description",className:(0,p.cn)("text-muted-foreground text-sm",t),...s})}let A=e=>{let{conversation:t,sidechainConversations:s,getToolResult:a}=e,n=(e=>{let t=e.at(0),s="".concat(e.length," conversations (").concat((null==t?void 0:t.type)!=="summary"?null==t?void 0:t.uuid:"",")");if(!t||"user"!==t.type)return s;let r="string"==typeof t.message.content?t.message.content:(()=>{let e=t.message.content.at(0);return void 0===e?null:"string"==typeof e?e:"text"===e.type?e.text:null})();return null!=r?r:s})(s),d="summary"!==t.type?t.uuid:t.leafUuid;return(0,r.jsxs)(f,{children:[(0,r.jsx)(b,{asChild:!0,children:(0,r.jsx)(o.$,{variant:"outline",size:"sm",className:"w-full mb-3 items-center justify-start",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden",children:[(0,r.jsx)(x.A,{className:"h-4 w-4 flex-shrink-0"}),(0,r.jsxs)("span",{className:"overflow-hidden text-ellipsis",children:["View Task: ",n]})]})})}),(0,r.jsxs)(N,{className:"!w-[1200px] !max-w-none max-h-[80vh] overflow-hidden flex flex-col",children:[(0,r.jsxs)(y,{children:[(0,r.jsx)(w,{children:n.length>100?"".concat(n.slice(0,100),"..."):n}),(0,r.jsxs)(k,{children:["Root UUID: ",d]})]}),(0,r.jsx)("div",{className:"flex-1 overflow-auto",children:(0,r.jsx)(ea,{conversations:s,getToolResult:a})})]})]})};var C=s(55407),R=s(5530),S=s(9005),_=s(26314),M=s(8607);let Z=(0,s(7951).F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function T(e){let{className:t,variant:s,asChild:a=!1,...n}=e,d=a?M.DX:"span";return(0,r.jsx)(d,{"data-slot":"badge",className:(0,p.cn)(Z({variant:s}),t),...n})}var z=s(75284),B=s(76845);function I(e){let{...t}=e;return(0,r.jsx)(B.bL,{"data-slot":"collapsible",...t})}function U(e){let{...t}=e;return(0,r.jsx)(B.R6,{"data-slot":"collapsible-trigger",...t})}function D(e){let{...t}=e;return(0,r.jsx)(B.Ke,{"data-slot":"collapsible-content",...t})}var E=s(35853),L=s(36703),W=s(35880),$=s(96318);let O=e=>{let{content:t,className:s=""}=e;return(0,r.jsx)("div",{className:"prose prose-neutral dark:prose-invert max-w-none ".concat(s),children:(0,r.jsx)(E.oz,{remarkPlugins:[$.A],components:{h1(e){let{children:t,...s}=e;return(0,r.jsx)("h1",{className:"text-3xl font-bold mb-6 mt-8 pb-3 border-b border-border text-foreground",...s,children:t})},h2(e){let{children:t,...s}=e;return(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-4 mt-8 pb-2 border-b border-border/50 text-foreground",...s,children:t})},h3(e){let{children:t,...s}=e;return(0,r.jsx)("h3",{className:"text-xl font-semibold mb-3 mt-6 text-foreground",...s,children:t})},h4(e){let{children:t,...s}=e;return(0,r.jsx)("h4",{className:"text-lg font-medium mb-2 mt-4 text-foreground",...s,children:t})},h5(e){let{children:t,...s}=e;return(0,r.jsx)("h5",{className:"text-base font-medium mb-2 mt-4 text-foreground",...s,children:t})},h6(e){let{children:t,...s}=e;return(0,r.jsx)("h6",{className:"text-sm font-medium mb-2 mt-4 text-muted-foreground",...s,children:t})},p(e){let{children:t,...s}=e;return(0,r.jsx)("p",{className:"mb-4 leading-7 text-foreground",...s,children:t})},ul(e){let{children:t,...s}=e;return(0,r.jsx)("ul",{className:"mb-4 ml-6 list-disc space-y-2",...s,children:t})},ol(e){let{children:t,...s}=e;return(0,r.jsx)("ol",{className:"mb-4 ml-6 list-decimal space-y-2",...s,children:t})},li(e){let{children:t,...s}=e;return(0,r.jsx)("li",{className:"leading-7 text-foreground",...s,children:t})},code(e){let{className:t,children:s,...a}=e,n=/language-(\w+)/.exec(t||"");return n?(0,r.jsxs)("div",{className:"relative my-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-between bg-muted/30 px-4 py-2 border-b border-border rounded-t-lg",children:(0,r.jsx)("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:n[1]})}),(0,r.jsx)(L.A,{style:W.A,language:n[1],PreTag:"div",className:"!mt-0 !rounded-t-none !rounded-b-lg !border-t-0 !border !border-border",customStyle:{margin:0,borderTopLeftRadius:0,borderTopRightRadius:0},children:String(s).replace(/\n$/,"")})]}):(0,r.jsx)("code",{className:"bg-muted/70 px-2 py-1 rounded-md text-sm font-mono text-foreground border",...a,children:s})},pre(e){let{children:t,...s}=e;return(0,r.jsx)("pre",{...s,children:t})},blockquote(e){let{children:t,...s}=e;return(0,r.jsx)("blockquote",{className:"border-l-4 border-primary/30 bg-muted/30 pl-6 pr-4 py-4 my-6 italic rounded-r-lg",...s,children:(0,r.jsx)("div",{className:"text-muted-foreground",children:t})})},a(e){let{children:t,href:s,...a}=e;return(0,r.jsx)("a",{href:s,className:"text-primary hover:text-primary/80 underline underline-offset-4 decoration-primary/30 hover:decoration-primary/60 transition-colors",...a,children:t})},table(e){let{children:t,...s}=e;return(0,r.jsx)("div",{className:"overflow-x-auto my-6 rounded-lg border border-border",children:(0,r.jsx)("table",{className:"min-w-full border-collapse",...s,children:t})})},thead(e){let{children:t,...s}=e;return(0,r.jsx)("thead",{className:"bg-muted/50",...s,children:t})},th(e){let{children:t,...s}=e;return(0,r.jsx)("th",{className:"border-b border-border px-4 py-3 text-left font-semibold text-foreground",...s,children:t})},td(e){let{children:t,...s}=e;return(0,r.jsx)("td",{className:"border-b border-border px-4 py-3 text-foreground",...s,children:t})},hr(e){let{...t}=e;return(0,r.jsx)("hr",{className:"my-8 border-t border-border",...t})},strong(e){let{children:t,...s}=e;return(0,r.jsx)("strong",{className:"font-semibold text-foreground",...s,children:t})},em(e){let{children:t,...s}=e;return(0,r.jsx)("em",{className:"italic text-foreground",...s,children:t})}},children:t})})},P=e=>{let{content:t,getToolResult:s}=e;if("text"===t.type)return(0,r.jsx)("div",{className:"w-full mx-2 my-6",children:(0,r.jsx)(O,{content:t.text})});if("thinking"===t.type)return(0,r.jsx)(z.Zp,{className:"bg-muted/50 border-dashed gap-2 py-3",children:(0,r.jsxs)(I,{children:[(0,r.jsx)(U,{asChild:!0,children:(0,r.jsx)(z.aR,{className:"cursor-pointer hover:bg-muted/80 rounded-t-lg transition-colors py-0 px-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(C.A,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsx)(z.ZB,{className:"text-sm font-medium",children:"Thinking"}),(0,r.jsx)(R.A,{className:"h-4 w-4 text-muted-foreground transition-transform group-data-[state=open]:rotate-180"})]})})}),(0,r.jsx)(D,{children:(0,r.jsx)(z.Wu,{className:"py-0 px-4",children:(0,r.jsx)("div",{className:"text-sm text-muted-foreground whitespace-pre-wrap font-mono",children:t.thinking})})})]})});if("tool_use"===t.type){let e=s(t.id);return(0,r.jsxs)(z.Zp,{className:"border-blue-200 bg-blue-50/50 dark:border-blue-800 dark:bg-blue-950/20 gap-2 py-3 mb-2",children:[(0,r.jsxs)(z.aR,{className:"py-0 px-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(S.A,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),(0,r.jsx)(z.ZB,{className:"text-sm font-medium",children:"Tool Use"}),(0,r.jsx)(T,{variant:"outline",className:"border-blue-300 text-blue-700 dark:border-blue-700 dark:text-blue-300",children:t.name})]}),(0,r.jsxs)(z.BT,{className:"text-xs",children:["Tool execution with ID: ",t.id]})]}),(0,r.jsxs)(z.Wu,{className:"space-y-2 py-0 px-4",children:[(0,r.jsxs)(I,{children:[(0,r.jsx)(U,{asChild:!0,children:(0,r.jsxs)("div",{className:"flex items-center justify-between cursor-pointer hover:bg-muted/50 rounded p-2 -mx-2",children:[(0,r.jsx)("h4",{className:"text-xs font-medium text-muted-foreground",children:"Input Parameters"}),(0,r.jsx)(R.A,{className:"h-3 w-3 text-muted-foreground transition-transform group-data-[state=open]:rotate-180"})]})}),(0,r.jsx)(D,{children:(0,r.jsx)("div",{className:"bg-background rounded border p-2 mt-1",children:(0,r.jsx)("pre",{className:"text-xs overflow-x-auto",children:JSON.stringify(t.input,null,2)})})})]}),e&&(0,r.jsxs)(I,{children:[(0,r.jsx)(U,{asChild:!0,children:(0,r.jsxs)("div",{className:"flex items-center justify-between cursor-pointer hover:bg-muted/50 rounded p-2 -mx-2",children:[(0,r.jsx)("h4",{className:"text-xs font-medium text-muted-foreground",children:"Tool Result"}),(0,r.jsx)(R.A,{className:"h-3 w-3 text-muted-foreground transition-transform group-data-[state=open]:rotate-180"})]})}),(0,r.jsx)(D,{children:(0,r.jsx)("div",{className:"bg-background rounded border p-2 mt-1",children:(0,r.jsx)("pre",{className:"text-xs overflow-x-auto",children:JSON.stringify(e.content,null,2)})})})]})]})]})}return"tool_result"===t.type?(0,r.jsxs)(z.Zp,{className:"border-amber-200 bg-amber-50/50 dark:border-amber-800 dark:bg-amber-950/20 gap-2 py-3",children:[(0,r.jsx)(z.aR,{className:"py-0 px-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(_.A,{className:"h-4 w-4 text-amber-600 dark:text-amber-400"}),(0,r.jsx)(z.ZB,{className:"text-sm font-medium",children:"Tool Result"}),(0,r.jsx)(T,{variant:"outline",className:"border-amber-300 text-amber-700 dark:border-amber-700 dark:text-amber-300",children:"Debug"})]})}),(0,r.jsx)(z.Wu,{className:"py-0 px-4",children:(0,r.jsx)("div",{className:"bg-background rounded border p-2",children:(0,r.jsx)("pre",{className:"text-xs overflow-x-auto",children:JSON.stringify(t,null,2)})})})]}):null},q=e=>{let{children:t}=e;return(0,r.jsxs)(I,{children:[(0,r.jsx)(U,{asChild:!0,children:(0,r.jsxs)("div",{className:"flex items-center justify-between cursor-pointer hover:bg-muted/50 rounded p-2 -mx-2",children:[(0,r.jsx)("h4",{className:"text-xs font-medium text-muted-foreground",children:"Meta Information"}),(0,r.jsx)(R.A,{className:"h-3 w-3 text-muted-foreground transition-transform group-data-[state=open]:rotate-180"})]})}),(0,r.jsx)(D,{children:(0,r.jsx)("div",{className:"bg-background rounded border p-3 mt-2",children:t})})]})},F=e=>{let{children:t}=e;return(0,r.jsxs)(I,{children:[(0,r.jsx)(U,{asChild:!0,children:(0,r.jsxs)("div",{className:"flex items-center justify-between cursor-pointer hover:bg-muted/50 rounded p-2 -mx-2",children:[(0,r.jsx)("h4",{className:"text-xs font-medium text-muted-foreground",children:"Summarized"}),(0,r.jsx)(R.A,{className:"h-3 w-3 text-muted-foreground transition-transform group-data-[state=open]:rotate-180"})]})}),(0,r.jsx)(D,{children:(0,r.jsx)("div",{className:"bg-background rounded border p-3 mt-2",children:(0,r.jsx)("pre",{className:"text-xs overflow-x-auto",children:t})})})]})},J=e=>{let{children:t}=e;return(0,r.jsxs)(I,{children:[(0,r.jsx)(U,{asChild:!0,children:(0,r.jsxs)("div",{className:"flex items-center justify-between cursor-pointer hover:bg-muted/50 rounded p-2 -mx-2",children:[(0,r.jsx)("h4",{className:"text-xs font-medium text-muted-foreground",children:"System Message"}),(0,r.jsx)(R.A,{className:"h-3 w-3 text-muted-foreground transition-transform group-data-[state=open]:rotate-180"})]})}),(0,r.jsx)(D,{children:(0,r.jsx)("div",{className:"bg-background rounded border p-3 mt-2",children:(0,r.jsx)("pre",{className:"text-xs overflow-x-auto",children:t})})})]})};var V=s(93021),H=s(28043),K=s(68607),Y=s(72676),X=s(5556);let Q=RegExp("<(?<tag>[^>]+)>(?<content>\\s*[^<]*?\\s*)<\\/\\k<tag>>","g"),G=X.Ik({tag:X.Yj(),content:X.Yj()}),ee=e=>{let{text:t}=e,s=(e=>{var t,s,r,a;let n=Array.from(e.matchAll(Q)).map(e=>G.safeParse(e.groups)).filter(e=>e.success).map(e=>e.data);if(0===n.length)return{kind:"text",content:e};let d=null==(t=n.find(e=>"command-name"===e.tag))?void 0:t.content,l=null==(s=n.find(e=>"command-args"===e.tag))?void 0:s.content,o=null==(r=n.find(e=>"command-message"===e.tag))?void 0:r.content,i=null==(a=n.find(e=>"local-command-stdout"===e.tag))?void 0:a.content;switch(!0){case void 0!==d&&void 0!==l:return{kind:"command",commandName:d,commandArgs:l,commandMessage:o};case void 0!==d&&void 0!==o:return{kind:"local-command-1",commandName:d,commandMessage:o};case void 0!==i:return{kind:"local-command-2",stdout:i};default:return{kind:"text",content:e}}})(t);return"command"===s.kind?(0,r.jsxs)(z.Zp,{className:"border-green-200 bg-green-50/50 dark:border-green-800 dark:bg-green-950/20 gap-2 py-3 mb-3",children:[(0,r.jsx)(z.aR,{className:"py-0 px-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(Y.A,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),(0,r.jsx)(z.ZB,{className:"text-sm font-medium",children:"Claude Code Command"}),(0,r.jsx)(T,{variant:"outline",className:"border-green-300 text-green-700 dark:border-green-700 dark:text-green-300",children:s.commandName})]})}),""===s.commandArgs.trim()?null:(0,r.jsx)(z.Wu,{className:"py-0 px-4",children:(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-xs font-medium text-muted-foreground",children:"Arguments:"}),(0,r.jsx)("div",{className:"bg-background rounded border p-2 mt-1",children:(0,r.jsx)("code",{className:"text-xs",children:s.commandArgs})})]})})})]}):"local-command-1"===s.kind?(0,r.jsxs)(z.Zp,{className:"border-green-200 bg-green-50/50 dark:border-green-800 dark:bg-green-950/20 gap-2 py-3 mb-3",children:[(0,r.jsx)(z.aR,{className:"py-0 px-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(Y.A,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),(0,r.jsx)(z.ZB,{className:"text-sm font-medium",children:"Local Command"})]})}),(0,r.jsx)(z.Wu,{className:"py-0 px-4",children:(0,r.jsx)("pre",{className:"text-xs overflow-x-auto",children:s.commandMessage})})]}):"local-command-2"===s.kind?(0,r.jsxs)(z.Zp,{className:"border-green-200 bg-green-50/50 dark:border-green-800 dark:bg-green-950/20 gap-2 py-3 mb-3",children:[(0,r.jsx)(z.aR,{className:"py-0 px-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(Y.A,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),(0,r.jsx)(z.ZB,{className:"text-sm font-medium",children:"Local Command"})]})}),(0,r.jsx)(z.Wu,{className:"py-0 px-4",children:(0,r.jsx)("pre",{className:"text-xs overflow-x-auto",children:s.stdout})})]}):(0,r.jsx)(O,{className:"w-full mx-2 my-6",content:s.content})},et=e=>{let{content:t}=e;return"string"==typeof t?(0,r.jsx)(ee,{text:t}):"text"===t.type?(0,r.jsx)(ee,{text:t.text}):"image"===t.type?"base64"===t.source.type?(0,r.jsxs)(z.Zp,{className:"border-purple-200 bg-purple-50/50 dark:border-purple-800 dark:bg-purple-950/20",children:[(0,r.jsxs)(z.aR,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(V.A,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"}),(0,r.jsx)(z.ZB,{className:"text-sm font-medium",children:"Image"}),(0,r.jsx)(T,{variant:"outline",className:"border-purple-300 text-purple-700 dark:border-purple-700 dark:text-purple-300",children:t.source.media_type})]}),(0,r.jsx)(z.BT,{className:"text-xs",children:"User uploaded image content"})]}),(0,r.jsx)(z.Wu,{children:(0,r.jsx)("div",{className:"rounded-lg border overflow-hidden bg-background",children:(0,r.jsx)(K.default,{src:"data:".concat(t.source.media_type,";base64,").concat(t.source.data),alt:"User uploaded content",className:"max-w-full h-auto max-h-96 object-contain"})})})]}):(0,r.jsx)(z.Zp,{className:"border-red-200 bg-red-50/50 dark:border-red-800 dark:bg-red-950/20",children:(0,r.jsxs)(z.aR,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(H.A,{className:"h-4 w-4 text-red-600 dark:text-red-400"}),(0,r.jsx)(z.ZB,{className:"text-sm font-medium",children:"Unsupported Media"}),(0,r.jsx)(T,{variant:"destructive",children:"Error"})]}),(0,r.jsx)(z.BT,{className:"text-xs",children:"Media type not supported for display"})]})}):(t.type,null)},es=e=>{let{conversation:t,getToolResult:s,isRootSidechain:a,getSidechainConversations:n}=e;if("summary"===t.type)return(0,r.jsx)(F,{children:t.summary});if("system"===t.type)return(0,r.jsx)(J,{children:t.content});if(t.isSidechain)return a(t)?(0,r.jsx)(A,{conversation:t,sidechainConversations:n(t.uuid).map(e=>"summary"===e.type?e:{...e,isSidechain:!1}),getToolResult:s}):null;if("user"===t.type){let e="string"==typeof t.message.content?(0,r.jsx)(et,{content:t.message.content}):(0,r.jsx)("ul",{className:"w-full",children:t.message.content.map(e=>(0,r.jsx)("li",{children:(0,r.jsx)(et,{content:e})},e.toString()))});return!0===t.isMeta?(0,r.jsx)(q,{children:e}):e}return"assistant"===t.type?(0,r.jsx)("ul",{className:"w-full",children:t.message.content.map(e=>(0,r.jsx)("li",{children:(0,r.jsx)(P,{content:e,getToolResult:s})},e.toString()))}):null},er=e=>{if("user"===e.type)return"user_".concat(e.uuid);if("assistant"===e.type)return"assistant_".concat(e.uuid);if("system"===e.type)return"system_".concat(e.uuid);if("summary"===e.type)return"summary_".concat(e.leafUuid);throw Error("Unknown conversation type: ".concat(e))},ea=e=>{let{conversations:t,getToolResult:s}=e,{isRootSidechain:a,getSidechainConversations:n}=(e=>{let t=(0,c.useMemo)(()=>new Map(e.filter(e=>"summary"!==e.type).map(e=>[e.uuid,e])),[e]),s=(0,c.useCallback)(e=>{if("summary"===e.type||null===e.parentUuid)return e;let r=t.get(e.parentUuid);return void 0===r?e:s(r)},[t]),r=(0,c.useMemo)(()=>{let t=e.filter(e=>"summary"!==e.type).filter(e=>!0===e.isSidechain),r=new Map;for(let e of t){let t=s(e);if("summary"!==t.type)if(r.has(t.uuid)){var a;null==(a=r.get(t.uuid))||a.push(e)}else r.set(t.uuid,[e])}return r},[e,s]);return{isRootSidechain:(0,c.useCallback)(e=>"summary"!==e.type&&r.has(e.uuid),[r]),getSidechainConversations:(0,c.useCallback)(e=>{var t;return null!=(t=r.get(e))?t:[]},[r])}})(t);return(0,r.jsx)("ul",{children:t.flatMap(e=>{let t=(0,r.jsx)(es,{conversation:e,getToolResult:s,isRootSidechain:a,getSidechainConversations:n},er(e)),d="summary"!==e.type&&e.isSidechain;return[(0,r.jsx)("li",{className:"w-full flex ".concat(d||"assistant"===e.type||"system"===e.type||"summary"===e.type?"justify-start":"justify-end"),children:(0,r.jsx)("div",{className:"w-[85%]",children:t})},er(e))]})})};var en=s(12240),ed=s(5685);let el=e=>{let{sessions:t,currentSessionId:s,projectId:a}=e;return(0,r.jsxs)("div",{className:"h-full flex flex-col bg-sidebar text-sidebar-foreground",children:[(0,r.jsxs)("div",{className:"border-b border-sidebar-border p-4",children:[(0,r.jsx)("h2",{className:"font-semibold text-lg",children:"Sessions"}),(0,r.jsxs)("p",{className:"text-xs text-sidebar-foreground/70 mt-1",children:[t.length," total"]})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-2 space-y-0.5",children:t.map(e=>{let t=e.id===s,d=null!==e.meta.firstCommand?(0,i.H)(e.meta.firstCommand):e.id;return(0,r.jsx)(l(),{href:"/projects/".concat(a,"/sessions/").concat(encodeURIComponent(e.id)),className:(0,p.cn)("block rounded-lg p-2.5 transition-all duration-200 hover:bg-blue-50/60 hover:border-blue-300/60 hover:shadow-sm border border-sidebar-border/40 bg-sidebar/30",t&&"bg-blue-100 border-blue-400 shadow-md ring-1 ring-blue-200/50 hover:bg-blue-100 hover:border-blue-400"),children:(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)("h3",{className:"text-sm font-medium line-clamp-2 leading-tight text-sidebar-foreground",children:d}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 text-xs text-sidebar-foreground/70",children:[(0,r.jsx)(n.A,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:e.meta.messageCount})]}),e.meta.lastModifiedAt&&(0,r.jsx)("span",{className:"text-xs text-sidebar-foreground/60",children:new Date(e.meta.lastModifiedAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]})},e.id)})})]})},eo=e=>{let{currentSessionId:t,projectId:s,className:a}=e,{data:{sessions:d}}=(0,ed.B)(s),[l,i]=(0,c.useState)(!1);return(0,r.jsx)(I,{open:!l,onOpenChange:e=>i(!e),className:(0,p.cn)("hidden md:flex h-full",a),children:(0,r.jsx)("div",{className:"relative h-full",children:(0,r.jsxs)("div",{className:(0,p.cn)("h-full border-r border-sidebar-border transition-all duration-300 ease-in-out",l?"w-12":"w-72 lg:w-80"),children:[(0,r.jsx)(U,{asChild:!0,children:(0,r.jsx)(o.$,{variant:"ghost",size:"icon",className:"absolute -right-3 top-4 z-10 bg-background border border-sidebar-border shadow-sm",children:(0,r.jsx)(en.A,{className:(0,p.cn)("w-4 h-4 transition-transform duration-200",l&&"rotate-180")})})}),(0,r.jsx)(D,{className:"h-full data-[state=closed]:animate-slide-out-to-left data-[state=open]:animate-slide-in-from-left",children:(0,r.jsx)(el,{sessions:d,currentSessionId:t,projectId:s})}),l&&(0,r.jsx)("div",{className:"h-full bg-sidebar border-r border-sidebar-border flex flex-col items-center pt-16",children:(0,r.jsx)(n.A,{className:"w-5 h-5 text-sidebar-foreground/70"})})]})})})},ei=e=>{let{projectId:t,sessionId:s}=e,{session:d,conversations:x,getToolResult:h}=((e,t)=>{let s=((e,t)=>(0,m.U)({queryKey:["sessions",t],queryFn:async()=>(await u.s.api.projects[":projectId"].sessions[":sessionId"].$get({param:{projectId:e,sessionId:t}})).json()}))(e,t),r=(0,c.useMemo)(()=>new Map(s.data.session.conversations.flatMap(e=>"user"!==e.type||"string"==typeof e.message.content?[]:e.message.content.flatMap(e=>"string"==typeof e||"tool_result"!==e.type?[]:[[e.tool_use_id,e]]))),[s.data.session.conversations]),a=(0,c.useCallback)(e=>r.get(e),[r]);return{session:s.data.session,conversations:s.data.session.conversations,getToolResult:a}})(t,s);return(0,r.jsxs)("div",{className:"flex h-screen",children:[(0,r.jsx)(eo,{currentSessionId:s,projectId:t}),(0,r.jsx)("div",{className:"flex-1 flex flex-col overflow-hidden",children:(0,r.jsxs)("div",{className:"max-w-none px-6 md:px-8 py-6 md:py-8 flex-1 overflow-y-auto",children:[(0,r.jsxs)("header",{className:"mb-8",children:[(0,r.jsx)(o.$,{asChild:!0,variant:"ghost",className:"mb-4",children:(0,r.jsxs)(l(),{href:"/projects/".concat(t),className:"flex items-center gap-2",children:[(0,r.jsx)(a.A,{className:"w-4 h-4"}),"Back to Session List"]})}),(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)(n.A,{className:"w-6 h-6"}),(0,r.jsx)("h1",{className:"text-3xl font-bold",children:null!==d.meta.firstCommand?(0,i.H)(d.meta.firstCommand):s})]}),(0,r.jsxs)("p",{className:"text-muted-foreground font-mono text-sm",children:["Session ID: ",s]})]}),(0,r.jsx)("main",{className:"w-full px-20",children:(0,r.jsx)(ea,{conversations:x,getToolResult:h})})]})})]})}},18237:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var r=s(98951),a=s(42411);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}},53630:(e,t,s)=>{"use strict";s.d(t,{s:()=>r});let r=(0,s(74865).hc)("http://localhost:3400")},72667:(e,t,s)=>{"use strict";s.d(t,{H:()=>r});let r=e=>{switch(e.kind){case"command":return"".concat(e.commandName," ").concat(e.commandArgs);case"local-command-1":return e.commandMessage;case"local-command-2":return e.stdout;case"text":return e.content;default:throw Error("Invalid first command")}}},75284:(e,t,s)=>{"use strict";s.d(t,{BT:()=>o,Wu:()=>i,ZB:()=>l,Zp:()=>n,aR:()=>d});var r=s(89835),a=s(18237);function n(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function d(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function l(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",t),...s})}function o(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",t),...s})}function i(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",t),...s})}},80942:(e,t,s)=>{"use strict";s.d(t,{$:()=>o});var r=s(89835),a=s(8607),n=s(7951),d=s(18237);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:s,size:n,asChild:o=!1,...i}=e,c=o?a.DX:"button";return(0,r.jsx)(c,{"data-slot":"button",className:(0,d.cn)(l({variant:s,size:n,className:t})),...i})}}},e=>{e.O(0,[449,771,889,900,341,358],()=>e(e.s=11874)),_N_E=e.O()}]);